{"version":3,"sources":["webpack://test_work/./src/scripts/components/Card.js","webpack://test_work/./src/scripts/components/Popup.js","webpack://test_work/./src/scripts/components/PopupWithForm.js","webpack://test_work/./src/scripts/components/PopupWithImage.js","webpack://test_work/./src/scripts/components/PopupConfirm.js","webpack://test_work/./src/scripts/components/Section.js","webpack://test_work/./src/scripts/components/UserUnfo.js","webpack://test_work/./src/scripts/components/FornValidator.js","webpack://test_work/./src/scripts/components/Api.js","webpack://test_work/./src/scripts/utils/variables.js","webpack://test_work/./src/pages/index.js"],"names":["Card","userId","cardContent","link","name","alt","likes","_id","owner","selectors","templateSelector","modalSelector","handlers","handleCardClick","handleLikeClick","handleDeleteClick","pushDeleteEvent","this","_userId","_imageUrl","_altText","_title","_likes","_cardId","_cardOwnerId","_templateSelector","_popup","document","querySelector","_handleCardClick","_handleLikeClick","_handleDeleteClick","_pushDeleteEvent","content","cloneNode","evt","target","classList","toggle","_element","contains","cardElement","addEventListener","_isLiked","deleteButton","card","forEach","person","add","textContent","_toggleLikeStatus","closest","remove","_getTemplate","_setEventListeners","src","length","_setDefaultLikeStatus","Popup","popupSelector","closeButtonSelector","_closeButton","_closeByEsc","bind","_closeByOverlay","key","close","removeEventListener","PopupWithForm","formSelector","submitHandle","handler","_form","_inputList","querySelectorAll","_submitHandle","_inputValues","input","value","dataFromPage","preventDefault","_getInputValues","_setInputValues","reset","PopupWithImage","imageSelector","captionSelector","_image","_caption","url","text","PopupConfirm","_handleSubmitCallback","submitAction","Section","containerSelector","renderer","_renderer","_container","contentList","contentItem","element","prepend","checkCardsAmount","append","_renderHasCards","_renderNoCards","UserInfo","nameSelector","descriptionSelector","avatarSelector","_name","_description","_avatar","description","about","avatar","FormValidator","config","form","_formElement","_submitElement","submitButtonSelector","Array","from","inputSelector","_inputInvalidClass","inputInvalidClass","_inputErrorVisibleClass","inputErrorVisibleClass","_buttonInvalidClass","buttonInvalidClass","inputElement","_checkIsValid","_setSubmitButtonState","errorMessage","errorEllement","id","validity","valid","_hideErrorMessage","_showErrorMessage","validationMessage","checkValidity","removeAttribute","setAttribute","_setInputEventListemers","Api","baseUrl","cohort","authorization","headers","_baseUrl","_cohort","_token","fetch","then","res","ok","json","Promise","reject","status","method","body","JSON","stringify","place","cardId","editForm","editSubmitButton","editAvatarForm","editImageSubmitButton","addForm","addSubmitButton","button","defaultText","profile","profileName","profileDescription","profileEditButton","profileAddButton","profileEditImageButton","editPopup","open","editFormValidation","resetValidation","addPopup","addFormValidation","editImagePopup","editAvatarFormValidation","renderLoading","isLoading","createRawCard","cardPopup","isLiked","api","deleteLike","refreshedCard","setLikes","catch","err","console","log","setLike","confirmPopup","setSubmitAction","deleteCard","removeCard","gallery","profileInfo","addDefaultItem","generateCard","all","getUserInfo","getDefaultCards","values","setFullUserInfo","render","editTextUserInfo","setTextUserInfo","finally","setEventListeners","editUserPhoto","responce","setAvatar","addNewCard","addItem","enableValidation"],"mappings":"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","file":"main.js","sourcesContent":["\nexport default class Card {\n\n  constructor(\n\n    userId, {\n\n      cardContent: { link, name, alt = `Фотография '${name}'`, likes, _id, owner },\n\n      selectors: { templateSelector, modalSelector },\n\n      handlers: { handleCardClick, handleLikeClick, handleDeleteClick },\n\n      pushDeleteEvent\n    }) {\n\n    this._userId = userId;\n\n    this._imageUrl = link;\n    this._altText = alt;\n    this._title = name;\n    this._likes = likes;\n    this._cardId = _id;\n    this._cardOwnerId = owner._id;\n\n    this._templateSelector = templateSelector;\n    this._popup = document.querySelector(modalSelector);\n\n    this._handleCardClick = handleCardClick;\n    this._handleLikeClick = handleLikeClick;\n    this._handleDeleteClick = handleDeleteClick;\n\n    this._pushDeleteEvent = pushDeleteEvent;\n  }\n\n  _getTemplate() {\n\n    const cardTemplate = document\n      .querySelector(this._templateSelector)\n      .content\n      .querySelector('.card')\n      .cloneNode(true);\n\n    return cardTemplate;\n  }\n\n  _toggleLikeStatus(evt) {\n\n    evt.target.classList.toggle('card__like_active');\n  }\n\n  _isLiked() {\n\n    return this._element.querySelector('.card__like').classList.contains('card__like_active'); // по-хорошему, мне кажется, для проверки нужен запрос на сервер, есть ли в лайкнувших наш ID\n  }\n\n  _setEventListeners(cardElement) {\n\n    cardElement.querySelector(\".card__like\").addEventListener('click', evt => {\n\n      this._handleLikeClick(this._cardId, this._isLiked(), evt);\n    });\n\n    // эта конструкция вообще вызывает вопросы, может как-то поизящнее можно\n    const deleteButton = cardElement.querySelector(\".card__delete-card\");\n    if (deleteButton) {\n\n      deleteButton.addEventListener('click', evt => {\n\n        this._handleDeleteClick(this._cardId, evt);\n      });\n    };\n\n    cardElement.querySelector(\".card__picture\").addEventListener(\"click\", () => {\n\n      this._handleCardClick( this._imageUrl, this._title,  );\n    }\n    );\n\n  }\n\n  _setDefaultLikeStatus(card) {\n\n    this._likes.forEach(person => {\n\n      if (person._id == this._userId)\n        card.querySelector('.card__like').classList.add('card__like_active');\n    })\n  }\n\n  setLikes(likes, evt) {\n\n    this._element.querySelector(\".card__like-counter\").textContent = likes;\n    this._toggleLikeStatus(evt);\n  }\n\n  removeCard(evt) {\n\n    evt.target.closest(\".card\").remove();\n    this._pushDeleteEvent();\n  }\n\n  generateCard() {\n\n    this._element = this._getTemplate();\n\n    // вроде нет необходимости выносить это в метод ?\n    if (this._userId !== this._cardOwnerId) {\n\n      this._element.querySelector('.card__delete-card').remove();\n    }\n\n    this._setEventListeners(this._element);\n\n    this._element.querySelector('.card__picture').src = this._imageUrl;\n    this._element.querySelector('.card__picture').alt = this._altText;\n    this._element.querySelector('.card__title').textContent = this._title;\n    this._element.querySelector('.card__like-counter').textContent = this._likes.length;\n\n    this._setDefaultLikeStatus(this._element);\n\n    return this._element;\n  }\n\n}\n","\n\nexport default class Popup {\n\n  constructor({\n\n    selectors: { popupSelector, closeButtonSelector }\n  }\n\n  ) {\n\n    this._popup = document.querySelector(popupSelector);\n    this._closeButton = this._popup.querySelector(closeButtonSelector);\n\n    this._closeByEsc = this._closeByEsc.bind(this);\n    this._closeByOverlay = this._closeByOverlay.bind(this);\n  }\n\n  _closeByEsc(evt) {\n\n    if (evt.key === \"Escape\") {\n\n      this.close();\n    }\n  }\n\n\n  _closeByOverlay(evt) {\n\n    if (evt.target.classList.contains(\"popup\")) {\n\n      this.close();\n    }\n  }\n\n  setEventListeners() {\n\n    this._closeButton.addEventListener('click', this.close.bind(this));\n  }\n\n  open() {\n\n    this._popup.classList.add(\"popup_active\");\n\n    this._popup.addEventListener('mousedown', this._closeByOverlay);\n    document.addEventListener('keydown', this._closeByEsc);\n  }\n\n  close() {\n\n    this._popup.classList.remove(\"popup_active\");\n\n    this._popup.removeEventListener('mousedown', this._closeByOverlay);\n    document.removeEventListener('keydown', this._closeByEsc);\n  }\n\n}\n","import Popup from './Popup.js';\n\nexport default class PopupWithForm extends Popup {\n\n  constructor({\n\n   selectors: {popupSelector, closeButtonSelector, formSelector},\n   handler: {submitHandle}\n  }) {\n\n    super({selectors:{ popupSelector, closeButtonSelector }});\n\n    this._form = this._popup.querySelector(formSelector);\n    this._inputList = this._form.querySelectorAll('.popup__field');\n\n    this._submitHandle = submitHandle;\n  }\n\n  _getInputValues() {\n\n    this._inputValues = {};\n\n    this._inputList.forEach(input => {\n\n      this._inputValues[input.name] = input.value;\n    });\n\n    return this._inputValues;\n  }\n\n  _setInputValues( dataFromPage ) {\n\n    this._inputList.forEach(input => {\n\n      input.value = dataFromPage[input.name] || '';  //  без || при передаче пустого объекта в поля запишется undefind\n    });\n  }\n\n  setEventListeners() {\n\n    super.setEventListeners();\n\n    this._form.addEventListener('submit', (evt) => {\n\n      evt.preventDefault();\n\n      this._submitHandle(this._getInputValues());\n\n    })\n  }\n\n  open( dataFromPage = {} ) {\n\n    super.open();\n\n    this._setInputValues(dataFromPage);\n  }\n\n  close() {\n\n    super.close();\n\n    this._form.reset();\n  }\n\n}\n","import Popup from './Popup.js';\n\nexport default class PopupWithImage extends Popup {\n\n  constructor({\n    selectors: {\n      popupSelector, closeButtonSelector, imageSelector, captionSelector\n    }\n  }\n  ) {\n\n    super({selectors:{ popupSelector, closeButtonSelector }});\n\n    this._image = this._popup.querySelector(imageSelector);\n    this._caption = this._popup.querySelector(captionSelector);\n  }\n\n  open(url, text) {\n\n    super.open()\n\n    this._image.src = url;\n    this._caption.textContent = text;\n  }\n}\n","import Popup from \"./Popup\";\n\nexport default class PopupConfirm extends Popup {\n\n  constructor({\n\n    selectors: {\n      popupSelector, closeButtonSelector, formSelector\n    }\n  }) {\n\n    super({selectors:{ popupSelector, closeButtonSelector }});\n\n    this._form = this._popup.querySelector(formSelector);\n  }\n\n  setEventListeners() {\n\n    super.setEventListeners();\n\n    this._form.addEventListener('submit', (evt) => {\n\n      evt.preventDefault();\n\n      this._handleSubmitCallback();\n    })\n  }\n\n  setSubmitAction(submitAction) {\n\n    this._handleSubmitCallback = submitAction;\n  }\n}\n","export default class Section {\n\n  constructor({ renderer }, containerSelector) {\n\n    this._renderer = renderer;\n    this._container = document.querySelector(containerSelector);\n  }\n\n  render(userId, contentList) {\n\n    contentList.forEach((contentItem) => {\n      this._renderer(userId, contentItem);\n    })\n  }\n\n  addItem(element) {\n\n    this._container.prepend(element)\n    this.checkCardsAmount();\n  }\n\n  addDefaultItem(element) {\n\n    this._container.append(element);\n    this.checkCardsAmount();\n  }\n\n  checkCardsAmount() {\n\n    if (!this._container.querySelector('.card')) {\n\n      this._renderNoCards();\n    }\n    else {\n      this._renderHasCards();\n    }\n  }\n\n  _renderNoCards() {\n    this._container.querySelector('.no-cards').classList.remove(\"no-cards_hidden\");\n  }\n\n  _renderHasCards() {\n    this._container.querySelector('.no-cards').classList.add(\"no-cards_hidden\");\n  }\n\n\n}\n\n\n","export default class UserInfo{\n\n  constructor({nameSelector, descriptionSelector, avatarSelector}){\n\n    this._name = document.querySelector(nameSelector);\n    this._description = document.querySelector(descriptionSelector);\n    this._avatar = document.querySelector(avatarSelector);\n  }\n\n  getUserInfo(){\n\n    return {name:this._name.textContent, description:this._description.textContent}\n  }\n\n  setFullUserInfo({name, about, avatar}){\n\n    this._name.textContent = name;\n    this._description.textContent = about;\n    this._avatar.src = avatar;\n  }\n\n  setTextUserInfo({name, about}){\n\n    this._name.textContent = name;\n    this._description.textContent = about;\n  }\n\n  setAvatar(avatar){\n\n    this._avatar.src = avatar;\n  }\n\n}\n","\n\nexport default class FormValidator {\n\n  constructor(config, form) {\n\n    this._formElement = form;\n\n    this._submitElement = this._formElement.querySelector(config.submitButtonSelector);\n    this._inputList = Array.from(this._formElement.querySelectorAll(config.inputSelector));\n\n    this._inputInvalidClass = config.inputInvalidClass;\n    this._inputErrorVisibleClass = config.inputErrorVisibleClass;\n    this._buttonInvalidClass = config.buttonInvalidClass;\n  }\n\n  _setInputEventListemers() {\n\n    this._inputList.forEach(inputElement => {\n\n      inputElement.addEventListener('input', () => {\n\n        this._checkIsValid(inputElement);\n        this._setSubmitButtonState();\n      })\n    });\n\n  }\n\n  _showErrorMessage(inputElement, errorMessage) {\n\n    inputElement.classList.add(this._inputInvalidClass);\n\n    const errorEllement = this._formElement.querySelector(`#${inputElement.id}-error`);\n    errorEllement.textContent = errorMessage;\n    errorEllement.classList.add(this._inputErrorVisibleClass);\n  }\n\n  _hideErrorMessage(inputElement) {\n\n    inputElement.classList.remove(this._inputInvalidClass);\n\n    const errorEllement = this._formElement.querySelector(`#${inputElement.id}-error`);\n    errorEllement.textContent = '';\n    errorEllement.classList.remove(this._inputErrorVisibleClass);\n\n  }\n\n  _checkIsValid(inputElement) {\n\n    if (!inputElement.validity.valid) {\n      this._showErrorMessage(inputElement, inputElement.validationMessage);\n    }\n    else {\n      this._hideErrorMessage(inputElement);\n    }\n  }\n\n  _setSubmitButtonState() {\n\n    if (this._formElement.checkValidity()) {\n      this._submitElement.classList.remove(this._buttonInvalidClass);\n      this._submitElement.removeAttribute('disabled', true);\n    }\n    else {\n      this._submitElement.classList.add(this._buttonInvalidClass);\n      this._submitElement.setAttribute('disabled', true);\n    }\n  }\n\n  enableValidation() {\n\n    this._formElement.addEventListener('submit', evt => {\n\n      evt.preventDefault();\n    });\n\n    this._setSubmitButtonState();\n    this._setInputEventListemers();\n  }\n\n  resetValidation() {\n\n    this._setSubmitButtonState();\n\n    this._inputList.forEach(inputElement => {\n      this._hideErrorMessage(inputElement);\n    })\n  }\n\n}\n","export default class Api {\n\n  constructor(\n    {\n      baseUrl, cohort,\n      headers: {\n        authorization\n      }\n    }) {\n\n    this._baseUrl = baseUrl;\n    this._cohort = cohort;\n    this._token = authorization;\n\n  }\n\n  getUserInfo(){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n  }\n\n  editTextUserInfo({name, description}){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        about: description\n      })\n    })\n    .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n  }\n\n  editUserPhoto({avatar}){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    })\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n  }\n\n  getDefaultCards(){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards`, {\n      headers: {\n\n        authorization: this._token\n      }\n    })\n        .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n\n  }\n\n  addNewCard({url, place}){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: place,\n        link: url\n      })\n    })\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n  }\n\n  setLike(cardId){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n  }\n\n  deleteLike(cardId){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n  }\n\n  deleteCard(cardId){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n\n  }\n}\n","\nconst editForm = document.querySelector(\".popup__form_scope_edit\");\nconst editSubmitButton = editForm.querySelector('.popup__save-button_scope_edit');\n\nconst editAvatarForm = document.querySelector(\".popup__form_scope_edit-avatar\");\nconst editImageSubmitButton = editAvatarForm.querySelector('.popup__save-button_scope_edit-avatar');\n\nconst addForm = document.querySelector(\".popup__form_scope_add\");\nconst addSubmitButton = addForm.querySelector('.popup__save-button_scope_add');\n\n// не уверен, куда деть эту ф-ю\nconst buttonTextSaver = (buttons=>{\n\n  buttons.forEach(button=>{\n\n    button.defaultText = button.textContent;\n  })\n\n});\nbuttonTextSaver([ editSubmitButton, editImageSubmitButton, addSubmitButton ]);\n\nconst profile = document.querySelector(\".profile\");\nconst profileName = profile.querySelector('.profile__name');\nconst profileDescription = profile.querySelector('.profile__description');\nconst profileEditButton = profile.querySelector(\".profile__edit-profile\");\nconst profileAddButton = profile.querySelector(\".profile__add-card\");\nconst profileEditImageButton = profile.querySelector(\".profile__image-and-edit-button-container\");\n\nconst gallerySelector = '.gallery';\n\n\nconst editFormConfig = {\n\n  inputSelector: \".popup__field\",\n  submitButtonSelector: \".popup__save-button\",\n\n  inputInvalidClass: 'popup__field_invalid',\n  inputErrorVisibleClass: 'popup__input-error_active',\n  buttonInvalidClass: 'popup__save-button_disabled'\n}\n\nconst addFormConfig = {\n\n  inputSelector: \".popup__field\",\n  submitButtonSelector: \".popup__save-button\",\n\n  inputInvalidClass: 'popup__field_invalid',\n  inputErrorVisibleClass: 'popup__input-error_active',\n  buttonInvalidClass: 'popup__save-button_disabled'\n}\n\nconst editAvatarFormConfig = {\n\n  inputSelector: \".popup__field\",\n  submitButtonSelector: \".popup__save-button\",\n\n  inputInvalidClass: 'popup__field_invalid',\n  inputErrorVisibleClass: 'popup__input-error_active',\n  buttonInvalidClass: 'popup__save-button_disabled'\n}\n\n\nexport {\n  editForm,\n  addForm,\n  editAvatarForm,\n  profileEditButton, profileAddButton, profileEditImageButton, profileName, profileDescription,\n  editSubmitButton, editImageSubmitButton, addSubmitButton,\n  gallerySelector,\n  editFormConfig, addFormConfig, editAvatarFormConfig }\n","import './index.css';\n\nimport Card from \"../scripts/components/Card.js\";\nimport PopupWithForm from \"../scripts/components/PopupWithForm.js\";\nimport PopupWithImage from \"../scripts/components/PopupWithImage.js\";\nimport PopupConfirm from '../scripts/components/PopupConfirm';\nimport Section from \"../scripts/components/Section.js\";\nimport UserInfo from \"../scripts/components/UserUnfo.js\";\nimport FormValidator from \"../scripts/components/FornValidator.js\";\nimport Api from \"../scripts/components/Api.js\";\n\nimport {\n  profileName, profileDescription,\n  editForm,\n  addForm,\n  editAvatarForm,\n  profileEditButton, profileAddButton, profileEditImageButton,\n  editSubmitButton, editImageSubmitButton, addSubmitButton,\n  gallerySelector,\n  editFormConfig, addFormConfig, editAvatarFormConfig\n} from \"../scripts/utils/variables.js\";\n\n\nprofileEditButton.addEventListener(\"click\", () => {\n\n  // выглядит колхозно\n  editPopup.open({ name: profileName.textContent, description: profileDescription.textContent });\n\n  editFormValidation.resetValidation();\n})\n\nprofileAddButton.addEventListener(\"click\", () => {\n\n  addPopup.open();\n\n  addFormValidation.resetValidation();\n})\n\nprofileEditImageButton.addEventListener(\"click\", () => {\n\n  editImagePopup.open();\n\n  editAvatarFormValidation.resetValidation();\n})\n\n\n// функции, наверное, надо убрать куда-то\nconst renderLoading = (button, isLoading) => {\n\n  if (isLoading) {\n\n    button.textContent = 'Сохранение...';\n  }\n  else {\n\n    button.textContent = button.defaultText;\n  }\n};\n\nconst createRawCard = (userId, cardContent) => {\n\n  const card = new Card(\n    userId,\n    {\n      cardContent: cardContent,\n\n      selectors: {\n\n        templateSelector: '#card-template',\n        modalSelector: \".popup_scope_picture\"\n      },\n\n      handlers: {\n\n        handleCardClick: ( url, text ) => {\n\n          cardPopup.open( url, text );\n        },\n\n        handleLikeClick: (cardId, isLiked, evt) => {\n\n          if (isLiked) {\n\n            api.deleteLike(cardId)\n              .then(refreshedCard => {\n\n                card.setLikes(refreshedCard.likes.length, evt);\n              })\n              .catch(err => {\n                console.log(`Error text: ${err} `)\n              })\n          }\n          else {\n\n            api.setLike(cardId)\n              .then(refreshedCard => {\n\n                card.setLikes(refreshedCard.likes.length, evt);\n              })\n              .catch(err => {\n                console.log(`Error text: ${err} `)\n              })\n          }\n        },\n\n        handleDeleteClick: (cardId, evt) => {\n\n          confirmPopup.open();\n          confirmPopup.setSubmitAction(() => {\n\n            api.deleteCard(cardId)\n              .then(() => {\n\n                card.removeCard(evt);\n                confirmPopup.close();\n              })\n              .catch(err => {\n                console.log(`ERROR TEXT: ${err}`);\n              });\n          });\n        }\n      },\n\n      pushDeleteEvent: () => {\n\n        gallery.checkCardsAmount();\n      }\n    },\n  );\n\n  return card;\n}\n\n\n\nconst profileInfo = new UserInfo({\n  nameSelector: '.profile__name',\n  descriptionSelector: '.profile__description',\n  avatarSelector: '.profile__photo'\n});\n\n\nconst gallery = new Section({\n\n  renderer: (userId, contentItem) => {\n\n    const cardElement = createRawCard(userId, contentItem);\n    gallery.addDefaultItem(cardElement.generateCard());\n  }\n\n}, gallerySelector\n);\n\n\nconst api = new Api({\n\n  baseUrl: 'https://mesto.nomoreparties.co/v1/',\n  cohort: 'cohort-19',\n  headers: {\n    authorization: '27d54b31-347e-468f-bb4e-e4fee200824a',\n  }\n});\n\n\nPromise.all([\n  api.getUserInfo(),\n  api.getDefaultCards()\n])\n  .then(values => {\n\n    profileInfo.setFullUserInfo(values[0]); //как-то более понятно бы передать\n    gallery.render(values[0]._id, values[1]);\n  })\n  .catch(err => {\n\n    console.log(`Error text: ${err} `)\n  });\n\n\n\nconst editPopup = new PopupWithForm({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_edit',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_edit'\n  },\n\n  handler: {\n\n    submitHandle: ({ name, description }) => {\n\n      renderLoading(editSubmitButton, true);\n\n      api.editTextUserInfo({ name, description }) // может без деструктуризации понятнее ?\n        .then(({ name, about }) => {\n\n          profileInfo.setTextUserInfo({ name, about });\n\n        })\n        .catch(err => {\n          console.log(`Error text: ${err} `)\n        })\n        .finally(() => {\n\n          renderLoading(editSubmitButton, false);\n        })\n\n      editPopup.close();\n    }\n  }\n});\n\neditPopup.setEventListeners();\n\n\nconst editImagePopup = new PopupWithForm({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_edit-avatar',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_edit-avatar',\n  },\n\n  handler: {\n\n    submitHandle: ({ ['avatar-url']: avatar }) => {\n\n      renderLoading(editImageSubmitButton, true);\n\n      api.editUserPhoto({ avatar })\n        .then( responce => {\n           // тут без деструктурицазии понятнее, мне кажется\n          profileInfo.setAvatar(responce.avatar)\n        })\n        .catch(err => {\n          console.log(`Error text: ${err} `)\n        })\n        .finally(() => {\n\n          renderLoading(editImageSubmitButton, false);\n        })\n\n      editImagePopup.close();\n    }\n  }\n});\n\neditImagePopup.setEventListeners();\n\n\nconst addPopup = new PopupWithForm({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_add',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_add',\n  },\n\n  handler: {\n\n    submitHandle: ({ ['place-name']: place, ['place-url']: url }) => {\n\n      renderLoading(addSubmitButton, true);\n\n      Promise.all([\n        api.getUserInfo(), // для получения ID текущего пользователя\n        api.addNewCard({ place, url })\n      ])\n        .then( values => {\n\n          const cardElement = createRawCard(values[0]._id, values[1]);\n          gallery.addItem(cardElement.generateCard());\n        })\n        .catch(err => {\n\n          console.log(`Error text: ${err} `)\n        })\n        .finally(() => {\n\n          renderLoading(addSubmitButton, false);\n        });\n\n      addPopup.close();\n    }\n  }\n\n});\n\naddPopup.setEventListeners();\n\n\nconst cardPopup = new PopupWithImage({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_picture',\n    closeButtonSelector: '.popup__close-popup',\n    imageSelector: '.card-popup__image',\n    captionSelector: '.card-popup__caption'\n  }\n});\n\ncardPopup.setEventListeners();\n\n\nconst confirmPopup = new PopupConfirm({\n  selectors: {\n\n    popupSelector: '.popup_scope_confirm-card-delete',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_confirm-delete'\n  }\n});\n\nconfirmPopup.setEventListeners();\n\n\n\n\nconst editFormValidation = new FormValidator(editFormConfig, editForm);\neditFormValidation.enableValidation();\n\nconst addFormValidation = new FormValidator(addFormConfig, addForm);\naddFormValidation.enableValidation();\n\nconst editAvatarFormValidation = new FormValidator(editAvatarFormConfig, editAvatarForm);\neditAvatarFormValidation.enableValidation();\n\n\n\n\n\n"],"sourceRoot":""}
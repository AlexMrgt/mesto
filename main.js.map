{"version":3,"sources":["webpack://test_work/./src/scripts/components/Card.js","webpack://test_work/./src/scripts/components/Popup.js","webpack://test_work/./src/scripts/components/PopupWithForm.js","webpack://test_work/./src/scripts/components/PopupWithImage.js","webpack://test_work/./src/scripts/components/PopupConfirm.js","webpack://test_work/./src/scripts/components/Section.js","webpack://test_work/./src/scripts/components/UserUnfo.js","webpack://test_work/./src/scripts/components/FornValidator.js","webpack://test_work/./src/scripts/components/Api.js","webpack://test_work/./src/scripts/utils/variables.js","webpack://test_work/./src/pages/index.js"],"names":["Card","userId","cardContent","link","name","alt","likes","_id","owner","selectors","templateSelector","modalSelector","handlers","handleCardClick","handleLikeClick","handleDeleteClick","pushDeleteEvent","this","_userId","_imageUrl","_altText","_title","_likes","_cardId","_cardOwnerId","_templateSelector","_popup","document","querySelector","_handleCardClick","_handleLikeClick","_handleDeleteClick","_pushDeleteEvent","content","cloneNode","evt","target","classList","toggle","card","forEach","person","add","_element","contains","cardElement","addEventListener","_isLiked","deleteButton","textContent","_toggleLikeStatus","closest","remove","_getTemplate","cardImage","src","length","_setDefaultLikeStatus","_setEventListeners","Popup","popupSelector","closeButtonSelector","_closeButton","_closeByEsc","bind","_closeByOverlay","key","close","removeEventListener","PopupWithForm","formSelector","submitHandle","handler","_form","_inputList","querySelectorAll","_submitHandle","_inputValues","input","value","dataFromPage","preventDefault","_getInputValues","_setInputValues","reset","PopupWithImage","imageSelector","captionSelector","_image","_caption","url","text","PopupConfirm","_handleSubmitCallback","submitAction","Section","containerSelector","renderer","_renderer","_container","contentList","contentItem","element","prepend","checkCardsAmount","append","_renderHasCards","_renderNoCards","UserInfo","nameSelector","descriptionSelector","avatarSelector","_name","_description","_avatar","description","about","avatar","FormValidator","config","form","_formElement","_submitElement","submitButtonSelector","Array","from","inputSelector","_inputInvalidClass","inputInvalidClass","_inputErrorVisibleClass","inputErrorVisibleClass","_buttonInvalidClass","buttonInvalidClass","inputElement","_checkIsValid","_setSubmitButtonState","errorMessage","errorEllement","id","validity","valid","_hideErrorMessage","_showErrorMessage","validationMessage","checkValidity","removeAttribute","setAttribute","_setInputEventListemers","Api","baseUrl","cohort","authorization","headers","_baseUrl","_cohort","_token","responce","ok","json","Promise","reject","status","fetch","then","res","_checkResponce","method","body","JSON","stringify","place","cardId","editForm","editSubmitButton","editAvatarForm","editImageSubmitButton","addForm","addSubmitButton","button","defaultText","profile","profileEditButton","profileAddButton","profileEditImageButton","renderLoading","isLoading","createRawCard","cardPopup","open","isLiked","api","deleteLike","refreshedCard","setLikes","catch","err","console","log","setLike","confirmPopup","setSubmitAction","deleteCard","removeCard","gallery","currentUserId","editPopup","profileInfo","getUserInfo","editFormValidation","resetValidation","addPopup","addFormValidation","editImagePopup","editAvatarFormValidation","addDefaultItem","generateCard","all","getDefaultCards","values","userData","cards","setFullUserInfo","render","editTextUserInfo","setTextUserInfo","finally","setEventListeners","editUserPhoto","setAvatar","addNewCard","addItem","enableValidation"],"mappings":"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","file":"main.js","sourcesContent":["\nexport default class Card {\n\n  constructor(\n\n    userId, {\n\n      cardContent: { link, name, alt = `Фотография '${name}'`, likes, _id, owner },\n\n      selectors: { templateSelector, modalSelector },\n\n      handlers: { handleCardClick, handleLikeClick, handleDeleteClick },\n\n      pushDeleteEvent\n    }) {\n\n    this._userId = userId;\n\n    this._imageUrl = link;\n    this._altText = alt;\n    this._title = name;\n    this._likes = likes;\n    this._cardId = _id;\n    this._cardOwnerId = owner._id;\n\n    this._templateSelector = templateSelector;\n    this._popup = document.querySelector(modalSelector);\n\n    this._handleCardClick = handleCardClick;\n    this._handleLikeClick = handleLikeClick;\n    this._handleDeleteClick = handleDeleteClick;\n\n    this._pushDeleteEvent = pushDeleteEvent;\n  }\n\n  _getTemplate() {\n\n    const cardTemplate = document\n      .querySelector(this._templateSelector)\n      .content\n      .querySelector('.card')\n      .cloneNode(true);\n\n    return cardTemplate;\n  }\n\n\n  _toggleLikeStatus(evt) {\n\n    evt.target.classList.toggle('card__like_active');\n  }\n\n  _setDefaultLikeStatus(card) {\n\n    this._likes.forEach(person => {\n\n      if (person._id == this._userId)\n        card.querySelector('.card__like').classList.add('card__like_active');\n    })\n  }\n\n  _isLiked() {\n\n    return this._element.querySelector('.card__like').classList.contains('card__like_active'); // по-хорошему, мне кажется, для проверки нужен запрос на сервер, есть ли в лайкнувших наш ID\n  }\n\n  _setEventListeners(cardElement) {\n\n    cardElement.querySelector(\".card__like\").addEventListener('click', evt => {\n\n      this._handleLikeClick(this._cardId, this._isLiked(), evt);\n    });\n\n    // эта конструкция вообще вызывает вопросы, может как-то поизящнее можно\n    const deleteButton = cardElement.querySelector(\".card__delete-card\");\n    if (deleteButton) {\n\n      deleteButton.addEventListener('click', evt => {\n\n        this._handleDeleteClick(this._cardId, evt);\n      });\n    };\n\n    cardElement.querySelector(\".card__picture\").addEventListener(\"click\", () => {\n\n      this._handleCardClick(this._imageUrl, this._title,);\n    }\n    );\n\n  }\n\n\n  setLikes(likes, evt) {\n\n    this._element.querySelector(\".card__like-counter\").textContent = likes;\n    this._toggleLikeStatus(evt);\n  }\n\n  removeCard(evt) {\n\n    evt.target.closest(\".card\").remove();\n    this._pushDeleteEvent();\n  }\n\n  generateCard() {\n\n    this._element = this._getTemplate();\n\n    const cardImage = this._element.querySelector('.card__picture');\n\n    cardImage.src = this._imageUrl;\n    cardImage.alt = this._altText;\n    this._element.querySelector('.card__title').textContent = this._title;\n    this._element.querySelector('.card__like-counter').textContent = this._likes.length;\n\n    this._setDefaultLikeStatus(this._element);\n\n    if (this._userId !== this._cardOwnerId) {\n\n      this._element.querySelector('.card__delete-card').remove();\n    }\n\n    this._setEventListeners(this._element);\n\n    return this._element;\n  }\n\n}\n","\n\nexport default class Popup {\n\n  constructor({\n\n    selectors: { popupSelector, closeButtonSelector }\n  }\n\n  ) {\n\n    this._popup = document.querySelector(popupSelector);\n    this._closeButton = this._popup.querySelector(closeButtonSelector);\n\n    this._closeByEsc = this._closeByEsc.bind(this);\n    this._closeByOverlay = this._closeByOverlay.bind(this);\n  }\n\n  _closeByEsc(evt) {\n\n    if (evt.key === \"Escape\") {\n\n      this.close();\n    }\n  }\n\n\n  _closeByOverlay(evt) {\n\n    if (evt.target.classList.contains(\"popup\")) {\n\n      this.close();\n    }\n  }\n\n  setEventListeners() {\n\n    this._closeButton.addEventListener('click', this.close.bind(this));\n  }\n\n  open() {\n\n    this._popup.classList.add(\"popup_active\");\n\n    this._popup.addEventListener('mousedown', this._closeByOverlay);\n    document.addEventListener('keydown', this._closeByEsc);\n  }\n\n  close() {\n\n    this._popup.classList.remove(\"popup_active\");\n\n    this._popup.removeEventListener('mousedown', this._closeByOverlay);\n    document.removeEventListener('keydown', this._closeByEsc);\n  }\n\n}\n","import Popup from './Popup.js';\n\nexport default class PopupWithForm extends Popup {\n\n  constructor({\n\n   selectors: {popupSelector, closeButtonSelector, formSelector},\n   handler: {submitHandle}\n  }) {\n\n    super({selectors:{ popupSelector, closeButtonSelector }});\n\n    this._form = this._popup.querySelector(formSelector);\n    this._inputList = this._form.querySelectorAll('.popup__field');\n\n    this._submitHandle = submitHandle;\n  }\n\n  _getInputValues() {\n\n    this._inputValues = {};\n\n    this._inputList.forEach(input => {\n\n      this._inputValues[input.name] = input.value;\n    });\n\n    return this._inputValues;\n  }\n\n  _setInputValues( dataFromPage ) {\n\n    this._inputList.forEach(input => {\n\n      input.value = dataFromPage[input.name] || '';  //  без || при передаче пустого объекта в поля запишется undefind\n    });\n  }\n\n  setEventListeners() {\n\n    super.setEventListeners();\n\n    this._form.addEventListener('submit', (evt) => {\n\n      evt.preventDefault();\n\n      this._submitHandle(this._getInputValues());\n\n    })\n  }\n\n  open( dataFromPage = {} ) {\n\n    super.open();\n\n    this._setInputValues(dataFromPage);\n  }\n\n  close() {\n\n    super.close();\n\n    this._form.reset();\n  }\n\n}\n","import Popup from './Popup.js';\n\nexport default class PopupWithImage extends Popup {\n\n  constructor({\n    selectors: {\n      popupSelector, closeButtonSelector, imageSelector, captionSelector\n    }\n  }\n  ) {\n\n    super({selectors:{ popupSelector, closeButtonSelector }});\n\n    this._image = this._popup.querySelector(imageSelector);\n    this._caption = this._popup.querySelector(captionSelector);\n  }\n\n  open(url, text) {\n\n    super.open()\n\n    this._image.src = url;\n    this._caption.textContent = text;\n  }\n}\n","import Popup from \"./Popup\";\n\nexport default class PopupConfirm extends Popup {\n\n  constructor({\n\n    selectors: {\n      popupSelector, closeButtonSelector, formSelector\n    }\n  }) {\n\n    super({selectors:{ popupSelector, closeButtonSelector }});\n\n    this._form = this._popup.querySelector(formSelector);\n  }\n\n  setEventListeners() {\n\n    super.setEventListeners();\n\n    this._form.addEventListener('submit', (evt) => {\n\n      evt.preventDefault();\n\n      this._handleSubmitCallback();\n    })\n  }\n\n  setSubmitAction(submitAction) {\n\n    this._handleSubmitCallback = submitAction;\n  }\n}\n","export default class Section {\n\n  constructor({ renderer }, containerSelector) {\n\n    this._renderer = renderer;\n    this._container = document.querySelector(containerSelector);\n  }\n\n  render(userId, contentList) {\n\n    contentList.forEach((contentItem) => {\n      this._renderer(userId, contentItem);\n    })\n  }\n\n  addItem(element) {\n\n    this._container.prepend(element)\n    this.checkCardsAmount();\n  }\n\n  addDefaultItem(element) {\n\n    this._container.append(element);\n    this.checkCardsAmount();\n  }\n\n  checkCardsAmount() {\n\n    if (!this._container.querySelector('.card')) {\n\n      this._renderNoCards();\n    }\n    else {\n      this._renderHasCards();\n    }\n  }\n\n  _renderNoCards() {\n    this._container.querySelector('.no-cards').classList.remove(\"no-cards_hidden\");\n  }\n\n  _renderHasCards() {\n    this._container.querySelector('.no-cards').classList.add(\"no-cards_hidden\");\n  }\n\n\n}\n\n\n","export default class UserInfo{\n\n  constructor({nameSelector, descriptionSelector, avatarSelector}){\n\n    this._name = document.querySelector(nameSelector);\n    this._description = document.querySelector(descriptionSelector);\n    this._avatar = document.querySelector(avatarSelector);\n  }\n\n  getUserInfo(){\n\n    return {name:this._name.textContent, description:this._description.textContent}\n  }\n\n  setFullUserInfo({name, about, avatar}){\n\n    this._name.textContent = name;\n    this._description.textContent = about;\n    this._avatar.src = avatar;\n  }\n\n  setTextUserInfo({name, about}){\n\n    this._name.textContent = name;\n    this._description.textContent = about;\n  }\n\n  setAvatar(avatar){\n\n    this._avatar.src = avatar;\n  }\n\n}\n","\n\nexport default class FormValidator {\n\n  constructor(config, form) {\n\n    this._formElement = form;\n\n    this._submitElement = this._formElement.querySelector(config.submitButtonSelector);\n    this._inputList = Array.from(this._formElement.querySelectorAll(config.inputSelector));\n\n    this._inputInvalidClass = config.inputInvalidClass;\n    this._inputErrorVisibleClass = config.inputErrorVisibleClass;\n    this._buttonInvalidClass = config.buttonInvalidClass;\n  }\n\n  _setInputEventListemers() {\n\n    this._inputList.forEach(inputElement => {\n\n      inputElement.addEventListener('input', () => {\n\n        this._checkIsValid(inputElement);\n        this._setSubmitButtonState();\n      })\n    });\n\n  }\n\n  _showErrorMessage(inputElement, errorMessage) {\n\n    inputElement.classList.add(this._inputInvalidClass);\n\n    const errorEllement = this._formElement.querySelector(`#${inputElement.id}-error`);\n    errorEllement.textContent = errorMessage;\n    errorEllement.classList.add(this._inputErrorVisibleClass);\n  }\n\n  _hideErrorMessage(inputElement) {\n\n    inputElement.classList.remove(this._inputInvalidClass);\n\n    const errorEllement = this._formElement.querySelector(`#${inputElement.id}-error`);\n    errorEllement.textContent = '';\n    errorEllement.classList.remove(this._inputErrorVisibleClass);\n\n  }\n\n  _checkIsValid(inputElement) {\n\n    if (!inputElement.validity.valid) {\n      this._showErrorMessage(inputElement, inputElement.validationMessage);\n    }\n    else {\n      this._hideErrorMessage(inputElement);\n    }\n  }\n\n  _setSubmitButtonState() {\n\n    if (this._formElement.checkValidity()) {\n      this._submitElement.classList.remove(this._buttonInvalidClass);\n      this._submitElement.removeAttribute('disabled', true);\n    }\n    else {\n      this._submitElement.classList.add(this._buttonInvalidClass);\n      this._submitElement.setAttribute('disabled', true);\n    }\n  }\n\n  enableValidation() {\n\n    this._formElement.addEventListener('submit', evt => {\n\n      evt.preventDefault();\n    });\n\n    this._setSubmitButtonState();\n    this._setInputEventListemers();\n  }\n\n  resetValidation() {\n\n    this._setSubmitButtonState();\n\n    this._inputList.forEach(inputElement => {\n      this._hideErrorMessage(inputElement);\n    })\n  }\n\n}\n","export default class Api {\n\n  //.then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\n\n  constructor(\n    {\n      baseUrl, cohort,\n      headers: {\n        authorization\n      }\n    }) {\n\n    this._baseUrl = baseUrl;\n    this._cohort = cohort;\n    this._token = authorization;\n\n  }\n\n  _checkResponce(responce){\n\n    return responce.ok ?  responce.json() : Promise.reject(`Ошибка: ${responce.status}`)\n  }\n\n  getUserInfo(){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(res => this._checkResponce(res))\n  }\n\n  editTextUserInfo({name, description}){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        about: description\n      })\n    })\n    .then(res => this._checkResponce(res))\n  }\n\n  editUserPhoto({avatar}){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    })\n      .then(res => this._checkResponce(res))\n  }\n\n  getDefaultCards(){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards`, {\n      headers: {\n\n        authorization: this._token\n      }\n    })\n        .then(res => this._checkResponce(res))\n\n  }\n\n  addNewCard({url, place}){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: place,\n        link: url\n      })\n    })\n      .then(res => this._checkResponce(res))\n  }\n\n  setLike(cardId){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => this._checkResponce(res))\n  }\n\n  deleteLike(cardId){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => this._checkResponce(res))\n  }\n\n  deleteCard(cardId){\n\n    return fetch(`${this._baseUrl}/${this._cohort}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => this._checkResponce(res))\n\n  }\n}\n","\nconst editForm = document.querySelector(\".popup__form_scope_edit\");\nconst editSubmitButton = editForm.querySelector('.popup__save-button_scope_edit');\n\nconst editAvatarForm = document.querySelector(\".popup__form_scope_edit-avatar\");\nconst editImageSubmitButton = editAvatarForm.querySelector('.popup__save-button_scope_edit-avatar');\n\nconst addForm = document.querySelector(\".popup__form_scope_add\");\nconst addSubmitButton = addForm.querySelector('.popup__save-button_scope_add');\n\n// не уверен, куда деть эту ф-ю\nconst buttonTextSaver = (buttons=>{\n\n  buttons.forEach(button=>{\n\n    button.defaultText = button.textContent;\n  })\n\n});\nbuttonTextSaver([ editSubmitButton, editImageSubmitButton, addSubmitButton ]);\n\nconst profile = document.querySelector(\".profile\");\nconst profileName = profile.querySelector('.profile__name');\nconst profileDescription = profile.querySelector('.profile__description');\nconst profileEditButton = profile.querySelector(\".profile__edit-profile\");\nconst profileAddButton = profile.querySelector(\".profile__add-card\");\nconst profileEditImageButton = profile.querySelector(\".profile__image-and-edit-button-container\");\n\nconst gallerySelector = '.gallery';\n\n\nconst editFormConfig = {\n\n  inputSelector: \".popup__field\",\n  submitButtonSelector: \".popup__save-button\",\n\n  inputInvalidClass: 'popup__field_invalid',\n  inputErrorVisibleClass: 'popup__input-error_active',\n  buttonInvalidClass: 'popup__save-button_disabled'\n}\n\nconst addFormConfig = {\n\n  inputSelector: \".popup__field\",\n  submitButtonSelector: \".popup__save-button\",\n\n  inputInvalidClass: 'popup__field_invalid',\n  inputErrorVisibleClass: 'popup__input-error_active',\n  buttonInvalidClass: 'popup__save-button_disabled'\n}\n\nconst editAvatarFormConfig = {\n\n  inputSelector: \".popup__field\",\n  submitButtonSelector: \".popup__save-button\",\n\n  inputInvalidClass: 'popup__field_invalid',\n  inputErrorVisibleClass: 'popup__input-error_active',\n  buttonInvalidClass: 'popup__save-button_disabled'\n}\n\n\nexport {\n  editForm,\n  addForm,\n  editAvatarForm,\n  profileEditButton, profileAddButton, profileEditImageButton, profileName, profileDescription,\n  editSubmitButton, editImageSubmitButton, addSubmitButton,\n  gallerySelector,\n  editFormConfig, addFormConfig, editAvatarFormConfig }\n","import './index.css';\n\nimport Card from \"../scripts/components/Card.js\";\nimport PopupWithForm from \"../scripts/components/PopupWithForm.js\";\nimport PopupWithImage from \"../scripts/components/PopupWithImage.js\";\nimport PopupConfirm from '../scripts/components/PopupConfirm';\nimport Section from \"../scripts/components/Section.js\";\nimport UserInfo from \"../scripts/components/UserUnfo.js\";\nimport FormValidator from \"../scripts/components/FornValidator.js\";\nimport Api from \"../scripts/components/Api.js\";\n\nimport {\n  editForm,\n  addForm,\n  editAvatarForm,\n  profileEditButton, profileAddButton, profileEditImageButton,\n  editSubmitButton, editImageSubmitButton, addSubmitButton,\n  gallerySelector,\n  editFormConfig, addFormConfig, editAvatarFormConfig\n} from \"../scripts/utils/variables.js\";\n\n\n// функции, наверное, надо убрать куда-то\nconst renderLoading = (button, isLoading) => {\n\n  if (isLoading) {\n\n    button.textContent = 'Сохранение...';\n  }\n  else {\n\n    button.textContent = button.defaultText; // если кто-то другой откроет код, то как этому человеку понять, где изначально появилось свойство defaultText? GoToDefenition по свойству не работает\n  }\n};\n\nconst createRawCard = (userId, cardContent) => {\n\n  const card = new Card(\n    userId,\n    {\n      cardContent: cardContent,\n\n      selectors: {\n\n        templateSelector: '#card-template',\n        modalSelector: \".popup_scope_picture\"\n      },\n\n      handlers: {\n\n        handleCardClick: (url, text) => {\n\n          cardPopup.open(url, text);\n        },\n\n        handleLikeClick: (cardId, isLiked, evt) => {\n\n          if (isLiked) {\n\n            api.deleteLike(cardId)\n              .then(refreshedCard => {\n\n                card.setLikes(refreshedCard.likes.length, evt);\n              })\n              .catch(err => {\n                console.log(`Error text: ${err} `)\n              })\n          }\n          else {\n\n            api.setLike(cardId)\n              .then(refreshedCard => {\n\n                card.setLikes(refreshedCard.likes.length, evt);\n              })\n              .catch(err => {\n                console.log(`Error text: ${err} `)\n              })\n          }\n        },\n\n        handleDeleteClick: (cardId, evt) => {\n\n          confirmPopup.open();\n          confirmPopup.setSubmitAction(() => {\n\n            api.deleteCard(cardId)\n              .then(() => {\n\n                card.removeCard(evt);\n                confirmPopup.close();\n              })\n              .catch(err => {\n                console.log(`ERROR TEXT: ${err}`);\n              });\n          });\n        }\n      },\n\n      pushDeleteEvent: () => {\n\n        gallery.checkCardsAmount();\n      }\n    },\n  );\n\n  return card;\n}\n\n\nlet currentUserId = ''; // выглядит не очень хорошо\n\n\nprofileEditButton.addEventListener(\"click\", () => {\n\n  editPopup.open(profileInfo.getUserInfo());\n\n  editFormValidation.resetValidation();\n})\n\nprofileAddButton.addEventListener(\"click\", () => {\n\n  addPopup.open();\n\n  addFormValidation.resetValidation();\n})\n\nprofileEditImageButton.addEventListener(\"click\", () => {\n\n  editImagePopup.open();\n\n  editAvatarFormValidation.resetValidation();\n})\n\n\nconst profileInfo = new UserInfo({\n  nameSelector: '.profile__name',\n  descriptionSelector: '.profile__description',\n  avatarSelector: '.profile__photo'\n});\n\n\nconst gallery = new Section({\n\n  renderer: (userId, contentItem) => {\n\n    const cardElement = createRawCard(userId, contentItem);\n    gallery.addDefaultItem(cardElement.generateCard());\n  }\n\n}, gallerySelector\n);\n\n\nconst api = new Api({\n\n  baseUrl: 'https://mesto.nomoreparties.co/v1/',\n  cohort: 'cohort-19',\n  headers: {\n    authorization: '27d54b31-347e-468f-bb4e-e4fee200824a',\n  }\n});\n\n\nPromise.all([\n  api.getUserInfo(),\n  api.getDefaultCards()\n])\n  .then(values => {\n\n    const [userData, cards] = values;\n    currentUserId = userData._id;\n\n    profileInfo.setFullUserInfo(userData); //как-то более понятно бы передать\n    gallery.render(userData._id, cards);\n  })\n  .catch(err => {\n\n    console.log(`Error text: ${err} `)\n  });\n\n\nconst editPopup = new PopupWithForm({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_edit',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_edit'\n  },\n\n  handler: {\n\n    submitHandle: ({ name, description }) => {\n\n      renderLoading(editSubmitButton, true);\n\n      api.editTextUserInfo({ name, description }) // может без деструктуризации понятнее ?\n        .then(({ name, about }) => {\n\n          profileInfo.setTextUserInfo({ name, about });\n\n          editPopup.close();\n\n        })\n        .catch(err => {\n          console.log(`Error text: ${err} `)\n        })\n        .finally(() => {\n\n          renderLoading(editSubmitButton, false);\n        })\n\n\n    }\n  }\n});\n\neditPopup.setEventListeners();\n\n\nconst editImagePopup = new PopupWithForm({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_edit-avatar',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_edit-avatar',\n  },\n\n  handler: {\n\n    submitHandle: ({ ['avatar-url']: avatar }) => {\n\n      renderLoading(editImageSubmitButton, true);\n\n      api.editUserPhoto({ avatar })\n        .then(responce => {\n\n          profileInfo.setAvatar(responce.avatar);\n\n          editImagePopup.close();\n        })\n        .catch(err => {\n          console.log(`Error text: ${err} `)\n        })\n        .finally(() => {\n\n          renderLoading(editImageSubmitButton, false);\n        })\n\n\n    }\n  }\n});\n\neditImagePopup.setEventListeners();\n\n\nconst addPopup = new PopupWithForm({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_add',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_add',\n  },\n\n  handler: {\n\n    submitHandle: ({ ['place-name']: place, ['place-url']: url }) => {\n\n      renderLoading(addSubmitButton, true);\n\n      api.addNewCard({ place, url })\n        .then(values => {\n\n          const cardElement = createRawCard(currentUserId, values);\n          gallery.addItem(cardElement.generateCard());\n\n          addPopup.close();\n        })\n        .catch(err => {\n\n          console.log(`Error text: ${err} `)\n        })\n        .finally(() => {\n\n          renderLoading(addSubmitButton, false);\n        });\n    }\n  }\n\n});\n\n\naddPopup.setEventListeners();\n\n\nconst cardPopup = new PopupWithImage({\n\n  selectors: {\n\n    popupSelector: '.popup_scope_picture',\n    closeButtonSelector: '.popup__close-popup',\n    imageSelector: '.card-popup__image',\n    captionSelector: '.card-popup__caption'\n  }\n});\n\ncardPopup.setEventListeners();\n\n\nconst confirmPopup = new PopupConfirm({\n  selectors: {\n\n    popupSelector: '.popup_scope_confirm-card-delete',\n    closeButtonSelector: '.popup__close-popup',\n    formSelector: '.popup__form_scope_confirm-delete'\n  }\n});\n\nconfirmPopup.setEventListeners();\n\n\n\nconst editFormValidation = new FormValidator(editFormConfig, editForm);\neditFormValidation.enableValidation();\n\nconst addFormValidation = new FormValidator(addFormConfig, addForm);\naddFormValidation.enableValidation();\n\nconst editAvatarFormValidation = new FormValidator(editAvatarFormConfig, editAvatarForm);\neditAvatarFormValidation.enableValidation();\n\n\n\n\n\n"],"sourceRoot":""}